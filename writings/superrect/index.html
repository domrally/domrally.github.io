<!DOCTYPE html>
<html>
<head>
    <title>SuperRect | Dom Mandy</title>

    <meta charset="utf-8">
    <meta name="description" content="Dom Mandy">
    <meta name="keywords" content="Dom, Mandy, mathematician, developer, video games, systems biology, perceptual geometry">

    <link href="favicon.ico" rel="shortcut icon">
    
    <script type="text/javascript" src="https://rawgit.com/patriciogonzalezvivo/glslCanvas/master/dist/GlslCanvas.js"></script>
    
<!--
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
-->
    <script>
        MathJax = {
            loader: {
                load: ['input/asciimath', 'output/svg', 'ui/menu']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>

    <link href="../writings.css" rel="stylesheet" media="screen">
</head>

<body>
    <header>
        <a href="">
            <h1>
                The Birth of the SuperRect
            </h1>
            <h2>
                —or: The Circle and the Square had Babies                    
            </h2>  
        </a>
        <section id="description">
            <nav>
                <a target="_blank" href="../index.html" style="display: none" class="externalLink">
                    a living document
                </a>
                by
                <a target="_blank" href="../../index.html" id="author">
                     Dom Mandy
                </a>
            </nav>
            <p>
                10 minute read
            </p>
        </section>
        <canvas id="rainbow" class="glslCanvas" data-fragment-url="media/rainbow.frag" height="512">
        </canvas>
        <canvas id="banner" class="glslCanvas" data-fragment-url="media/banner.frag" width="512" height="512"></canvas>
    </header>
    <main>
        <section id="CircleandSquare">
            
            <h2>
                <a href="#CircleandSquare">
                    Circle and Square
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
            
            <p>
                The circle and the square each communicate fundamental yet divergent visual information. Although designers sometimes use them for the same purpose, they do not carry the same meaning. We perceive the circle as a symbol of beauty; the square, utility. 
            </p>
            <p>
                The circle possesses an ideal form. The universe bestowed it with a sort of divine perfection. The sun and (full) moon—celestial bodies—look like circles from earth, and our eyes—purported windows to the soul—evolved into circles within circles. The circle’s bare symmetry appeals to us; its soft arcs a reasuring smile around its border.
            </p>
            <p>
                The square boxes us in. It divides and defines the boundaries of our land. Squares surround our homes. We consume media enclosed by squared displays. The square’s effortless marriage of parallel and perpendicular lines makes it a user-friendly, all-purpose design tool. Designers’ use of square grids maximizes space, as the tiled squares leave no gaps and contain the entire plane.
            </p>
            <p>
                Somewhere between a circle and a square, there exists an uncompromising shape offering both form and function. This would be a cooperative solution between the id and the superego.
            </p>
        </section>
        
        <section id="PsychologyofVisualPerception">
            <h2>
                <a href="#PsychologyofVisualPerception">
                    Psychology of Visual Perception
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
            <p>
                A square with rounded corners blends the aesthetic of the circle and the usefulness of the square. But for us to see a rounded square the same way we see a circle, our brains must also see them similarly.
            </p>
            <p>
                Our brains perform rapid signal processing when light enters our eyes and stores  information in a short-term form of memory. The brain selects and passes information to our conscious processing based on how much it stands out from its environment—a quality known as salience.
            </p>
            <p>
                The circle’s smoothness makes it easy on the eyes. The visual cortex processes smooth shapes faster than sharp ones, increasing speed and simplicity of our subconcious thought. Objects that the brain spends less time processing have less salience. 
            </p>
            <p>
                Our brains use salience to tell us what we need to pay attention to, and our brains deem any old corners worthy of our time. We evolved this function to protect us from death by sharp corners. Our brains have a nostalgic view of the world, and they often give us warnings in the absence of real threats. By recalling our genetic memories we can design our world to work in harmony with our minds. 
            </p>
            <p>
                Squares won’t stop being useful, and humanity will continue to use them. But sighted humans understand information more effectively when communicated without corners. We can make better squares by making squares without corners.
            </p>
        </section>
        
        <section id="Timeline">
            <h2>
                <a href="#Timeline">
                    Timeline
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
            <section>
                <figure>
                    <canvas class="glslCanvas" data-fragment-url="media/superEllipse.frag" width="512" height="512"></canvas>
                    <figcaption>
                        <h3>
                            superellipse
                        </h3>
                        <span class="math">
                            `((x),(y)) = sqrt|(cos t),(sin t)| |(cos t),(sin t)|^'`
                        </span>
                        <h3>
                            1818
                        </h3>
                    </figcaption>
                </figure>
                <p>
                    In 1818 Gabriel Lamé discovered a curve mathematically like a circle and superficially like a square. Long known as Lamé's Special Quartic, we now know it as the Squircle. The Squircle comes from a family of rounded squares known as Lamé Curves—until the name changed in 1959. 
                </p>
                <p>
                    The need for a rounded and squared shape gained public attention in 1959 with the construction of Sergels torg, a plaza in Stockholm, Sweden. The city planners wanted to design a fountain that would align with the intersection of two roads but with a shape better looking than a square. The city selected a Lamé Curve at the suggestion of Piet Hein, who renamed the shape to a Superellipse—a name still used today.
                </p>
            </section>
            <section>
                <figure>
                    <canvas class="glslCanvas" data-fragment-url="media/roundRect.frag" width="512" height="512"></canvas>
                    <figcaption>
                        <h3>
                            roundrect
                        </h3>
                        <span class="math">
                            `((x),(y)) = 
                            { 
                                ( ((cos t),(sin t)) min(|sec t|,|csc t|), + |__ {: (cos t),(sin t) :} ~| ),
                                ( ((cos t),(sin t)),                      + |      (cos t),(sin t)|^'    )
                            :}`
                        </span>
                        <h3>
                            1981
                        </h3>
                    </figcaption>
                </figure>
                <p>
                    Perhaps the most commonly used rounded square is the RoundRect. Web browsers use RoundRects to round corners on page elements through the border-radius. Almost any graphic design software gives users the RoundRect as a primitive shape for their designs. The addition of the RoundRect to one of the first examples of graphic design software solidified its ubiquity.
                </p>
                <p>
                    In May 1981, Bill Atkinson programmed the shapes to include in LisaGraf (a drawing program for the Apple Lisa computer). They understood the importance of adding squares with rounded corners but they could not use a Superellipse, since the hardware of the time could not render such a complicated shape. We often don’t get the best way; we get the way that works. In this case the RoundRect worked.
                </p>
            </section>
            <section>
                <figure>
                    <canvas class="glslCanvas" data-fragment-url="media/superRect.frag" width="512" height="512"></canvas>
                    <figcaption>
                        <h3>
                            superrect
                        </h3>
                        <span class="math">
                            `{:
                                ( ((x),(y)),  =, tanh(k ((cot t),(tan t))) |(sin t),(cos t)|^' ),
                                ( " "     k, ~~, 1.19228 )
                            :}`
                        </span>
                        <h3>
                            2018
                        </h3>
                    </figcaption>
                </figure>
                <p>
                    In late 2017, I went in search of the best square with rounded corners. In 2018—the Squircle’s bicentennial year—I discovered the SuperRect.
                </p>
            </section>
        </section>
        <section id="PerceptualGeometry">
            <h2>
                <a href="#PerceptualGeometry">
                    Perceptual Geometry
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
            <p>
                Let’s take a step back and look at the math behind our visual perception before I get into the reasoning behind the SuperRect. In fact, let’s step all the way back to the math behind our perception of the circle and square.
            </p>
            <p>
                I'd like to talk about these shapes using smoothness and flatness. A smooth curve has continuous curvature and smooth change in curvature. A flat curve has zero curvature and flat change in curvature. We can feel curvature, allowing us to understand it beyond the abstraction of mathematics.
            </p>
            <p>
                You feel curvature when you go around a corner on a train. In physics you would call this centripital force. In mathematics it all comes down to curvature. Moving through a smooth curve feels predictably smooth. Moving through a flat curve feels like nothing.
            </p>
            <p>
                Imagine yourself on a train. Please put your train on a circle shaped track. As your train moves around the loop you feel a constant pull away from the center. The amount of pull you feel matches the amount of curvature. The constant curvature defines the circle preceptually.
            </p>
            <p>
                Now let’s move your train to a square shaped track. Moving along a side of the square you feel no pull at all. When your train reaches a turn in the track, your train starts moving in a different direction and slams you to the side of the traincar. We see this violent change in direction as a corner. This corner makes the curvature discontinuous, preventing smoothness in a square.
            </p>
            <p>
                Now imagine your train on one of Lamé’s Superellipses. Here, like a circle, you feel a pull away from the center of the tracks, but the amount of pull changes over time. You will have a smooth ride with no bumps implying the smoothness of a Superellipse. The centripital force you feel never goes away, preventing flatness in a Superellipse.
            </p>
            <p>
                Now let’s look at the RoundRect. It has flat sides like the square and smooth corners like a circle. When our train crosses from a square-like length of track to a circle like part, we can feel a jarring bump. This makes our ride not smooth, implying the lack of smoothness in the RoundRect.
            </p>
            <figure>
                <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="512"></canvas>
            </figure>
            <p>
                Time to ride the train on a SuperRect track. Spoiler: The SuperRect is both smooth and flat. We have a smooth ride around the loop and at 4 points, one on each side, we feel free from all centripital force. This means the SuperRect can appear both circle-like and square-like.
            </p>
            <figure>
                <canvas class="glslCanvas" data-fragment-url="media/curvatureSuperRect.frag" width="512" height="512"></canvas>
            </figure>
        </section>
        <section id="DiscoveringtheSuperRect">
            <h2>
                <a href="#DiscoveringtheSuperRect">
                    Discovering the SuperRect
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
            <p>
                A square with rounded corners periodically alternates between being circle-like and square-like. This suggests that we could generate the rounded square using a periodic function. A square has 4 sides, so our x and y functions should each become flat twice per period. But how does a curve become flat if it is not already a straight line?
            </p>
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">sine wave</canvas>
<!--
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">flat wave</canvas>
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">wave for square</canvas>
-->
<!--
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">wave for roundrect</canvas>
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">wave for superellipse</canvas>
            
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">interactive</canvas>
            <canvas class="glslCanvas" data-fragment-url="media/curvatureRoundRect.frag" width="512" height="128">grid</canvas>
-->
            <p>
                Circle gets the Square.
            </p>
        </section>
        <section id="Implementations">
            <h2>
                <a href="#Implementations">
                    Implementations
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
        </section>
        <section id="FurtherReading">
            <h2>
                <a href="#FurtherReading">
                    Further Reading
                </a>
                <a target="_blank" href="#" class="linkToComments">
                    (view comments)
                </a>
            </h2>
        </section>
    </main>
    <footer>
        <h2>
            Credits
        </h2>
        <nav>
            <p>
                This essay was made possible thanks to these wonderful open source projects:
            </p>
            <a target="_blank" href="https://github.com/patriciogonzalezvivo/glslCanvas" class="externalLink">
                GlslCanvas
            </a>
            <a target="_blank" href="http://asciimath.org/" class="externalLink">
                AsciiMath
            </a>
            <a target="_blank" href="https://www.mathjax.org/" class="externalLink">
                MathJax
            </a>
            <a target="_blank" href="http://mozilla.github.io/Fira/" class="externalLink">
                Fira Type Family
            </a>
        </nav>
        <nav>
            <p>
                All code used in this article is provided with a permissive
                <a target="_blank" rel="license" href="http://asciimath.org/" class="externalLink">
                    MIT Licence
                </a>
            </p>
            <p>
                All images and writing are provided with a
                <a target="_blank" rel="license" href="http://creativecommons.org/licenses/by/4.0/" class="externalLink">
                    Creative Commons Attribution 4.0 International License
                </a>
            </p>
        </nav>
    </footer>
</body>
</html>